#!/bin/bash

# Скрипт для мониторинга логов микросервиса audio-notifier

# Переходим в директорию микросервиса
cd "$(dirname "$0")"

# Создаем директорию для логов, если она не существует
mkdir -p logs

# Проверяем наличие tail
if ! command -v tail &> /dev/null; then
    echo "Ошибка: команда 'tail' не найдена"
    exit 1
fi

# Проверяем наличие файла логов
if [ ! -f "logs/audio-notifier.log" ]; then
    echo "Лог-файл не найден. Возможно, микросервис еще не запускался или логи очищены."
    
    # Создаем пустой файл для дальнейшего мониторинга
    touch logs/audio-notifier.log
fi

# Мониторим логи в реальном времени
echo "Мониторинг логов микросервиса audio-notifier. Для выхода нажмите Ctrl+C."
echo "------------------------------------------------------------------"

tail -f logs/audio-notifier.log